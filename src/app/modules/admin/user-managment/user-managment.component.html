<div class="bg-card h-full flex-auto dark:bg-transparent">
    <div class="flex flex-col p-3">
        <div class="flex flex-auto flex-col">
            <div
                class="flex flex-col items-start px-6 py-8 sm:flex-row sm:items-center sm:justify-between md:px-8"
            >
                <div>
                    <div
                        class="text-4xl font-extrabold leading-none tracking-tight"
                    >
                        Users
                    </div>
                    <div class="text-secondary ml-0.5 mt-2 font-medium">
                        <span>All Users !</span>
                    </div>
                </div>

                <div class="mt-6 flex shrink-0 items-center sm:ml-4 sm:mt-0">
                    <mat-form-field
                        class="fuse-mat-dense fuse-mat-rounded min-w-64"
                        [subscriptSizing]="'dynamic'"
                    >
                        <mat-icon
                            class="icon-size-5"
                            matPrefix
                            [svgIcon]="'heroicons_solid:magnifying-glass'"
                        ></mat-icon>
                        <input
                            matInput
                            [(ngModel)]="searchInput"
                            (keyup)="applyFilter()"
                            placeholder="Search Users"
                            [matTooltip]="'Search Users'"
                        />
                    </mat-form-field>
                    <!-- Add User Button -->
                    <button
                        mat-flat-button
                        color="primary"
                        class="ml-4"
                        (click)="openUserDialog()"
                    >
                        <mat-icon>add</mat-icon>
                        <span class="ml-2">Add User</span>
                    </button>
                </div>
                <!-- <div class="flex">
                    <mat-form-field class="w-64">
                        <mat-label>Search Users</mat-label>
                        <input
                            matInput
                            [(ngModel)]="searchInput"
                            (keyup)="applyFilter()"
                        />
                        <mat-icon matSuffix>search</mat-icon>
                    </mat-form-field> -->
                <!-- </div> -->
            </div>
        </div>

        <div
            class="flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow sm:col-span-6"
        >
            <div class="mt-2 flex flex-auto flex-col overflow-x-auto">
                <table
                    class="min-w-240 overflow-y-visible"
                    mat-table
                    [dataSource]="dataSource"
                >
                    <ng-container matColumnDef="login">
                        <th mat-header-cell *matHeaderCellDef>Login</th>
                        <td mat-cell *matCellDef="let user">
                            {{ user.login }}
                        </td>
                    </ng-container>

                    <!-- Email Column -->
                    <ng-container matColumnDef="email">
                        <th mat-header-cell *matHeaderCellDef>Email</th>
                        <td mat-cell *matCellDef="let user">
                            {{ user.email }}
                        </td>
                    </ng-container>

                    <!-- First Name -->
                    <ng-container matColumnDef="firstName">
                        <th mat-header-cell *matHeaderCellDef>First Name</th>
                        <td mat-cell *matCellDef="let user">
                            {{ user.firstName }}
                        </td>
                    </ng-container>

                    <!-- Last Name -->
                    <ng-container matColumnDef="lastName">
                        <th mat-header-cell *matHeaderCellDef>Last Name</th>
                        <td mat-cell *matCellDef="let user">
                            {{ user.lastName }}
                        </td>
                    </ng-container>

                    <!-- Roles/Authorities -->
                    <ng-container matColumnDef="authorities">
                        <th mat-header-cell *matHeaderCellDef>Role</th>
                        <td mat-cell *matCellDef="let user">
                            <span
                                class="rounded bg-blue-100 px-2 py-1 text-blue-700"
                            >
                                {{ user.authorities?.join(', ') }}
                            </span>
                        </td>
                    </ng-container>

                    <!-- Actions -->
                    <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef>Actions</th>
                        <td mat-cell *matCellDef="let user">
                            <button
                                mat-icon-button
                                color="primary"
                                (click)="openUserDialog(user)"
                            >
                                <mat-icon>edit</mat-icon>
                            </button>
                            <button
                                mat-icon-button
                                color="warn"
                                (click)="deleteUser(user)"
                            >
                                <mat-icon>delete</mat-icon>
                            </button>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr
                        mat-row
                        *matRowDef="let row; columns: displayedColumns"
                    ></tr>
                </table>
            </div>
        </div>
    </div>
</div>
